{"version":3,"file":"content.js","names":["DEBUG","originalConsoleLog","console","log","originalConsoleError","error","__dmDebugState","loadedAt","Date","now","lastRestore","lastRestoreError","lastStorageSnapshot","lastShowNotification","lastShowNotificationError","args","message","toString","includes","window","self","top","href","location","readyState","document","ts","toISOString","e","addEventListener","ev","reason","String","__dmDownloaderDebug","state","forceRestore","restoreActiveDownloads","dumpStorageKeys","Promise","resolve","safeStorageGet","items","summary","Object","keys","filter","k","startsWith","sort","map","key","value","testNotification","showDownloadNotification","pingBackground","chrome","runtime","sendMessage","action","resp","err","lastError","initializeModules","initializeVideoExtraction","initializePageTracking","scheduleRestoreActiveDownloads","isVideoPage","injectDownloadButton","isExtensionContextValid","setTimeout","onMessage","addListener","request","sender","sendResponse","scheduleExtract","extractVideoConfig","success","downloadId","filename","isExisting","Math","random","substr","qualityLabel","body","result","progress","status","undefined","startDownloadProgressPolling","stack","stopDownloadProgressPolling","updateDownloadNotification","hideDownloadNotification","showDownloadBlockedToast","blobId","mimeType","expectedSize","blobReady","storage","local","get","signalRetries","signalWaitTime","min","arrayBuffer","retries","waitTime","id","Error","db","reject","indexedDB","open","onerror","onsuccess","onupgradeneeded","event","target","objectStoreNames","contains","createObjectStore","store","transaction","objectStore","data","byteLength","attemptNum","warn","close","ArrayBuffer","dbError","actualSize","sizeMB","round","blob","Blob","type","size","blobUrl","URL","createObjectURL","substring","attemptDownload","useSaveAs","downloads","download","url","saveAs","revokeObjectURL","search","results","length","bytesReceived","totalBytes","removeFile"],"sources":["0"],"mappings":"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","ignoreList":[]}